<!doctype html>
<html lang="ca">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Marcador Pàdel</title>
  <meta name="theme-color" content="#0a0a0a">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="assets/icon-192.png">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <meta name="description" content="Marcador de pàdel per tablet (PWA) amb control per veu, equips Blau i Vermell.">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="title">Marcador Pàdel</div>
      <div class="controls">
        <button id="micToggle" aria-pressed="false" title="Micròfon actiu/inactiu">
          <span class="icon">🎤</span><span>Micròfon</span><span id="micStatus" class="badge">OFF</span>
        </button>
        <button id="soundToggle" aria-pressed="true" title="So actiu/inactiu">
          <span class="icon">🔊</span><span>So</span><span id="soundStatus" class="badge">ON</span>
        </button>
        <button id="resetMatch" title="Reiniciar el partit">
          <span class="icon">🗑️</span><span>Reiniciar</span>
        </button>
        <button id="undoPoint" title="Retrocedir el punt anterior">
          <span class="icon">↩️</span><span>Desfer Punt</span>
        </button>
        <button id="randomTeams" title="Equips aleatoris (draft 3s)">
          <span class="icon">🎲</span><span>Equips aleatoris</span>
        </button>
        <button id="changeOrder" title="Canvi ordre servei (drag & drop)">
          <span class="icon">🔀</span><span>Ordre servei</span>
        </button>
        <button id="randomServe" title="Sorteig sac aleatori">
          <span class="icon">🪙</span><span>Sorteig sac</span>
        </button>
      </div>
    </div>

    <div class="grid">
      <!-- Team Blue -->
      <section class="team blue">
        <div class="team-header">
          <div class="team-name">
            <span class="pill blue">BLAU</span>
          </div>
          <div class="badge">Esquerra</div>
        </div>

        <div class="score-row">
          <div class="score left" id="scoreBlue">0</div>
          <div class="score right" id="scoreRedGhost" style="opacity:.08">00</div>
        </div>

        <div class="players">
          <div class="player" id="blueP1Row">
            <input id="blueP1" value="Blau 1" aria-label="Nom jugador Blau 1">
            <span class="order" id="blueP1Order">1</span>
          </div>
          <div class="player" id="blueP2Row">
            <input id="blueP2" value="Blau 2" aria-label="Nom jugador Blau 2">
            <span class="order" id="blueP2Order">3</span>
          </div>
        </div>

        <div class="main-actions">
          <button id="addBlue"><span class="icon">➕</span>Punt Blau</button>
        </div>

        <div class="meta">
          <div class="meta-box">
            <div class="meta-title">Jocs (Blue)</div>
            <div class="meta-value" id="gamesBlue">0</div>
          </div>
          <div class="meta-box">
            <div class="meta-title">Sets (Blue)</div>
            <div class="meta-value" id="setsBlue">0</div>
          </div>
          <div class="meta-box">
            <div class="meta-title">Jocs (Red)</div>
            <div class="meta-value" id="gamesRed">0</div>
          </div>
          <div class="meta-box">
            <div class="meta-title">Sets (Red)</div>
            <div class="meta-value" id="setsRed">0</div>
          </div>
        </div>
      </section>

      <!-- Team Red -->
      <section class="team red">
        <div class="team-header">
          <div class="team-name">
            <span class="pill red">VERMELL</span>
          </div>
          <div class="badge">Dreta</div>
        </div>

        <div class="score-row">
          <div class="score left" id="scoreBlueGhost" style="opacity:.08">00</div>
          <div class="score right" id="scoreRed">0</div>
        </div>

        <div class="players">
          <div class="player" id="redP1Row">
            <input id="redP1" value="Vermell 1" aria-label="Nom jugador Vermell 1">
            <span class="order" id="redP1Order">2</span>
          </div>
          <div class="player" id="redP2Row">
            <input id="redP2" value="Vermell 2" aria-label="Nom jugador Vermell 2">
            <span class="order" id="redP2Order">4</span>
          </div>
        </div>

        <div class="main-actions">
          <button id="addRed"><span class="icon">➕</span>Punt Vermell</button>
        </div>

        <div class="meta">
          <div class="meta-box">
            <div class="meta-title">Jocs (Blue)</div>
            <div class="meta-value" id="gamesBlue2">0</div>
          </div>
          <div class="meta-box">
            <div class="meta-title">Sets (Blue)</div>
            <div class="meta-value" id="setsBlue2">0</div>
          </div>
          <div class="meta-box">
            <div class="meta-title">Jocs (Red)</div>
            <div class="meta-value" id="gamesRed2">0</div>
          </div>
          <div class="meta-box">
            <div class="meta-title">Sets (Red)</div>
            <div class="meta-value" id="setsRed2">0</div>
          </div>
        </div>
      </section>
    </div>

    <div class="history">
      <div class="row">
        <div class="meta-title">Històric (Jocs per set)</div>
        <span class="badge">Veure resultat de cada set</span>
      </div>
      <div id="historyList"></div>
    </div>

    <div class="footer-note">
      Ordres de veu: “equipo rojo / equipo azul / cancelar punto” (ES) · “equip Vermell / equip Blau / cancelar punt” (CA)
    </div>
  </div>

  <!-- Modal for order -->
  <div class="modal-backdrop" id="orderModal">
    <div class="modal">
      <div class="modal-title">Canviar ordre de servei</div>
      <div class="sortable" id="sortableList"></div>
      <div class="drag-hint">Arrossega per ordenar (1 → 4). Els colors indiquen l'equip.</div>
      <div class="actions" style="margin-top:10px; justify-content:flex-end">
        <button id="cancelOrder">Cancel·lar</button>
        <button id="saveOrder" class="btn"><span class="icon">💾</span>Desar</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
