<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marcador P√†del</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0ea5e9"/>
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <style>
    :root{
      --blue:#1d4ed8;
      --blue-soft:#dbeafe;
      --red:#dc2626;
      --red-soft:#fee2e2;
      --muted:#334155;
      --surface:#0b0f19;
      --ok:#16a34a;
      --warn:#f59e0b;
      --bg:#0b1220;
      --card:#0f172a;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    .container{max-width:1200px;margin:0 auto;padding:12px;display:flex;flex-direction:column;gap:12px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .team{border-radius:18px; padding:12px; display:flex; flex-direction:column; gap:8px; min-height:220px;}
    .team.blue{background:var(--blue-soft); color:#0b1b4a;}
    .team.red{background:var(--red-soft); color:#4a0b0b;}
    .team-header{display:flex; align-items:center; justify-content:space-between; gap:8px}
    .players{display:flex; flex-direction:column; gap:6px}
    .player{display:flex; align-items:center; gap:8px; font-size:18px}
    .player input{background:transparent; border:none; border-bottom:2px solid rgba(0,0,0,0.15); font-size:18px; outline:none; width:100%; color:inherit; padding:2px 4px;}
    .order-badge{font-weight:700; font-size:12px; padding:2px 8px; border-radius:999px; background:rgba(0,0,0,0.10)}
    .serve-icon{width:22px; height:22px}
    .score{font-size:96px; font-weight:900; letter-spacing:1px; line-height:1; margin-top:auto; text-shadow:0 2px 0 rgba(0,0,0,0.2);}
    .align-right{align-items:flex-end; text-align:right}
    .align-left{align-items:flex-start; text-align:left}
    .meta{display:flex; gap:12px; flex-wrap:wrap}
    .meta .card{background:var(--card); border-radius:14px; padding:12px 14px; display:flex; gap:8px; align-items:center; box-shadow:0 6px 16px rgba(0,0,0,0.25);}
    .meta h3{margin:0;color:#cbd5e1; font-size:14px; font-weight:600; text-transform:uppercase; letter-spacing:.06em}
    .meta .value{font-size:22px; font-weight:800}
    .controls{display:flex; gap:8px; flex-wrap:wrap}
    .btn{display:inline-flex; align-items:center; gap:8px; background:#e2e8f0; color:#0f172a; border:none; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,0.2); user-select:none}
    .btn:disabled{opacity:0.6; cursor:not-allowed}
    .btn .icon{width:18px;height:18px}
    .btn.primary{background:#38bdf8;color:#031525}
    .btn.warn{background:#fde68a}
    .btn.danger{background:#fecaca}
    .toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center; background:#0f172a; padding:10px; border-radius:14px}
    .history{background:#0f172a; padding:12px; border-radius:14px}
    .history h3{margin:0 0 8px 0; font-size:16px; color:#cbd5e1}
    .history .sets{display:flex; gap:16px; flex-wrap:wrap}
    .chip{padding:6px 10px; border-radius:999px; background:#111827; font-weight:700; font-size:13px}
    .hidden{display:none !important}
    .racket{display:inline-block; width:22px; height:22px}
    .legend{font-size:12px; color:#94a3b8}
    .modal-backdrop{position:fixed; inset:0; background:rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center; padding:20px}
    .modal{background:#0f172a; border-radius:16px; width:min(700px, 96vw); padding:16px; display:flex; flex-direction:column; gap:12px}
    .list{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .draggable{padding:10px; border-radius:12px; background:#111827; display:flex; align-items:center; gap:8px; cursor:grab; color:#e5e7eb}
    .draggable.blue{border:2px solid var(--blue)} .draggable.red{border:2px solid var(--red)}
    .tiebreak{font-size:24px; font-weight:800; color:#fef08a}
    .switch{display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; background:#111827}
    .dot{width:10px;height:10px;border-radius:999px}
    .dot.on{background:#16a34a} .dot.off{background:#ef4444}
  </style>
</head>
<body>
  <div class="container">
    <div class="grid">
      <section id="team-blue" class="team blue align-right">
        <div class="team-header">
          <div class="legend">Equip Blau</div>
          <div id="serve-blue" title="Servei" class="serve-icon"></div>
        </div>
        <div class="players">
          <div class="player">
            <span class="order-badge" id="blue-p1-order">1</span>
            <input id="blue-p1" value="Blau 1" />
          </div>
          <div class="player">
            <span class="order-badge" id="blue-p2-order">3</span>
            <input id="blue-p2" value="Blau 2" />
          </div>
        </div>
        <div id="blue-score" class="score">0</div>
      </section>
      <section id="team-red" class="team red align-left">
        <div class="team-header">
          <div id="serve-red" title="Servei" class="serve-icon"></div>
          <div class="legend">Equip Vermell</div>
        </div>
        <div class="players">
          <div class="player">
            <input id="red-p1" value="Vermell 1" />
            <span class="order-badge" id="red-p1-order">2</span>
          </div>
          <div class="player">
            <input id="red-p2" value="Vermell 2" />
            <span class="order-badge" id="red-p2-order">4</span>
          </div>
        </div>
        <div id="red-score" class="score">0</div>
      </section>
    </div>
    <div class="meta">
      <div class="card"><h3>Jocs</h3><div class="value" id="games">0 ‚Äî 0</div></div>
      <div class="card"><h3>Sets</h3><div class="value" id="sets">0 ‚Äî 0</div></div>
      <div class="card"><h3>Mode</h3><div class="value" id="mode">Joc</div></div>
      <div class="card tiebreak hidden" id="tbIndicator">TIE-BREAK</div>
      <div class="card"><h3>Micr√≤fon</h3><div class="switch"><span class="dot off" id="mic-dot"></span><span id="mic-label">Inactiu</span></div></div>
      <div class="card"><h3>So</h3><div class="switch"><span class="dot on" id="sound-dot"></span><span id="sound-label">Actiu</span></div></div>
    </div>
    <div class="controls">
      <button class="btn primary" id="btn-enable-mic">
        <svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 14a3 3 0 0 0 3-3V5a3 3 0 1 0-6 0v6a3 3 0 0 0 3 3Zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2Zm-5 8a7 7 0 0 0 7-7h-2a5 5 0 0 1-10 0H5a7 7 0 0 0 7 7Zm-1 3h2v-3h-2v3Z"/></svg>
        Confirmar √∫s del micr√≤fon
      </button>
      <button class="btn" id="btn-blue-point">+ Punt Blau</button>
      <button class="btn" id="btn-red-point">+ Punt Vermell</button>
      <button class="btn warn" id="btn-undo">‚Ü©Ô∏è Retrocedir punt</button>
    </div>
    <div class="toolbar">
      <button class="btn" id="btn-mic-toggle">üé§ Micr√≤fon actiu/inactiu</button>
      <button class="btn" id="btn-sound-toggle">üîä So actiu/inactiu</button>
      <button class="btn danger" id="btn-reset">‚ôªÔ∏è Reiniciar partit</button>
      <button class="btn" id="btn-random-teams">üé≤ Equips aleatoris</button>
      <button class="btn" id="btn-service-order">üîÅ Canvi ordre servei</button>
      <button class="btn" id="btn-random-serve">üéØ Sorteig sac aleatori</button>
    </div>
    <div class="history">
      <h3>Hist√≤ric jocs per set</h3>
      <div id="history-sets" class="sets"></div>
    </div>
    <div id="modal-service" class="modal-backdrop hidden" role="dialog" aria-modal="true">
      <div class="modal">
        <h2>Canvia l'ordre del servei</h2>
        <div class="list" id="service-list"></div>
        <div class="legend">Arrossega per reordenar. Per defecte: Blau1 ‚Üí Vermell1 ‚Üí Blau2 ‚Üí Vermell2</div>
        <div style="display:flex; gap:8px; justify-content:flex-end">
          <button class="btn" id="service-cancel">Cancel¬∑lar</button>
          <button class="btn primary" id="service-save">Guardar</button>
        </div>
      </div>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>